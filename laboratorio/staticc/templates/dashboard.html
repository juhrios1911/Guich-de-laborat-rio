{% extends "base.html" %}
{% block content %}

<style>
    /* Isso muda o fundo da p√°gina toda */
    body { 
        background-color: #D1C4E9 !important; /* Cor lil√°s suave da Pessoa 4 */
    }

    .card-p4 { 
        background: #ffffff; 
        padding: 20px; 
        border-radius: 15px; 
        text-align: center; 
        border-bottom: 5px solid #5D3272; 
        box-shadow: 0 4px 6px #A8E6CF;
    }
    
    .header-p4 { 
        background-color: #5D3272; 
        color: #fbfbfb; 
        padding: 20px; 
        border-radius: 12px; 
        text-align: center; 
        margin-bottom: 30px; 
    }
</style>
 
<div class="header-p4">
    <h1 class="text-2xl font-bold">üè• Painel de Dados & Hist√≥rico</h1>
    <p>An√°lise de Performance do Laborat√≥rio</p>
</div>

<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div class="card-p4">
        <h3 class="font-bold text-slate-500 uppercase text-xs">M√©dia de Espera</h3>
        <p class="text-3xl font-black text-lilas">{{ metricas.media_espera }} min</p>
    </div>
    <div class="card-p4" style="border-bottom-color: #f43f5e;">
        <h3 class="font-bold text-slate-500 uppercase text-xs">Hor√°rio de Pico</h3>
        <p class="text-3xl font-black text-slate-800">{{ metricas.hora_pico }}</p>
    </div>
    <div class="card-p4" style="border-bottom-color: #5D3272;">
        <h3 class="font-bold text-slate-500 uppercase text-xs">Total Atendidos</h3>
        <p class="text-3xl font-black text-slate-800">{{ metricas.total }}</p>
    </div>
</div>

<div class="bg-white rounded-3xl shadow-sm border border-slate-200 overflow-hidden">
    <table class="w-full text-left">
        <thead class="bg-slate-50 border-b border-slate-100">
            <tr>
                <th class="p-4 text-xs font-black uppercase text-slate-400">Paciente</th>
                <th class="p-4 text-xs font-black uppercase text-slate-400">Tipo</th>
                <th class="p-4 text-xs font-black uppercase text-slate-400">Servi√ßo</th>
                <th class="p-4 text-xs font-black uppercase text-slate-400 text-right">Espera</th>
            </tr>
        </thead>
        <tbody>
           {% for p in atendimentos %}
            <tr class="border-b border-slate-50 hover:bg-slate-50 transition">
                <td class="p-4 font-bold text-slate-700">
                    <a href="/ficha/{{ p.cliente }}" target="_blank" class="hover:text-indigo-600 transition-colors underline decoration-dotted">
                        {{ p.cliente }}
                    </a>
                </td>
                
                <td class="p-4">
                    <span class="px-2 py-1 rounded text-[10px] font-bold {{ 'bg-red-100 text-red-600' if p.tipo == 'Prioritario' else 'bg-slate-100 text-slate-600' }}">
                        {{ p.tipo }}
                    </span>
                </td>
                <td class="p-4 text-slate-500">{{ p.servico }}</td>
                <td class="p-4 text-right font-mono font-bold text-lilas">{{ p.espera_min }} min</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}